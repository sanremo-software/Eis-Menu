
<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SANREMO - Sistema de Pedidos</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --light-bg: #f8f9fa;
            --dark-text: #2c3e50;
            --border-color: #dee2e6;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: var(--dark-text);
            line-height: 1.6;
            padding: 0;
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary-color) 0%, #1a2530 100%);
            color: white;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo {
            font-size: 2.2rem;
            font-weight: 700;
            letter-spacing: 1px;
            color: white;
        }
        
        .logo-software {
            font-size: 0.9rem;
            opacity: 0.8;
            font-weight: 300;
        }
        
        .header-controls {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .language-selector {
            display: flex;
            gap: 8px;
        }
        
        .lang-flag {
            width: 32px;
            height: 24px;
            border-radius: 3px;
            cursor: pointer;
            opacity: 0.7;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .lang-flag:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        .lang-flag.active {
            opacity: 1;
            border-color: white;
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
        }
        
        .admin-btn {
            background-color: var(--warning-color);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 20px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.3s;
        }
        
        .admin-btn:hover {
            background-color: #e67e22;
        }
        
        .table-number-container {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 8px 15px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .table-number {
            font-weight: 700;
            font-size: 1.2rem;
            color: white;
        }
        
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 25px;
        }
        
        .section-title {
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--secondary-color);
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .category-section {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }
        
        .product-card {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }
        
        .product-name {
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--primary-color);
            margin-bottom: 8px;
        }
        
        .product-description {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 12px;
            flex-grow: 1;
        }
        
        .product-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .product-price {
            font-weight: 700;
            color: var(--success-color);
            font-size: 1.2rem;
        }
        
        .add-btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 8px 15px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .add-btn:hover {
            background-color: #2980b9;
        }
        
        .order-container {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            margin-top: 20px;
        }
        
        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .table-display {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1rem;
        }
        
        .table-number-display {
            font-weight: 700;
            color: var(--primary-color);
            background-color: #e8f4fc;
            padding: 8px 15px;
            border-radius: 5px;
        }
        
        .order-items {
            max-height: 350px;
            overflow-y: auto;
            margin-bottom: 20px;
            padding-right: 10px;
        }
        
        .order-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px dashed var(--border-color);
        }
        
        .order-item:last-child {
            border-bottom: none;
        }
        
        .item-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .quantity-btn {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background-color: var(--light-bg);
            border: 1px solid var(--border-color);
            cursor: pointer;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        
        .quantity-btn:hover {
            background-color: #e2e6ea;
        }
        
        .item-quantity {
            font-weight: 600;
            min-width: 30px;
            text-align: center;
        }
        
        .remove-btn {
            background-color: #f8d7da;
            color: #721c24;
            border: none;
            border-radius: 4px;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: background-color 0.3s;
        }
        
        .remove-btn:hover {
            background-color: #f1b0b7;
        }
        
        .order-summary {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            border: 1px solid var(--border-color);
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
        }
        
        .total-row {
            font-weight: 700;
            font-size: 1.3rem;
            color: var(--primary-color);
            border-top: 2px solid var(--border-color);
            padding-top: 15px;
            margin-top: 10px;
        }
        
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .action-btn {
            padding: 14px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
        }
        
        .primary-btn {
            background-color: var(--success-color);
            color: white;
        }
        
        .primary-btn:hover {
            background-color: #219653;
        }
        
        .secondary-btn {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .secondary-btn:hover {
            background-color: #2980b9;
        }
        
        .tertiary-btn {
            background-color: #9b59b6;
            color: white;
        }
        
        .tertiary-btn:hover {
            background-color: #8e44ad;
        }
        
        .danger-btn {
            background-color: var(--accent-color);
            color: white;
        }
        
        .danger-btn:hover {
            background-color: #c0392b;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            width: 100%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            animation: modalFadeIn 0.3s;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modal-title {
            margin-bottom: 20px;
            color: var(--primary-color);
            font-size: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-text);
        }
        
        .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 25px;
        }
        
        .categories-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .category-tab {
            padding: 12px 25px;
            background-color: white;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .category-tab:hover {
            border-color: var(--secondary-color);
            background-color: #f0f8ff;
        }
        
        .category-tab.active {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }
        
        .category-content {
            display: none;
        }
        
        .category-content.active {
            display: block;
        }
        
        .admin-panel {
            display: none;
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            margin-top: 30px;
            border: 2px solid var(--warning-color);
        }
        
        .admin-section {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .admin-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        
        .products-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .product-admin-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
        }
        
        .product-admin-item:last-child {
            border-bottom: none;
        }
        
        .admin-actions {
            display: flex;
            gap: 10px;
        }
        
        .edit-btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 6px 12px;
            cursor: pointer;
            font-size: 0.85rem;
        }
        
        .delete-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 6px 12px;
            cursor: pointer;
            font-size: 0.85rem;
        }
        
        .table-selector {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .table-btn {
            aspect-ratio: 1;
            border-radius: 8px;
            border: 2px solid var(--border-color);
            background-color: white;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .table-btn:hover {
            border-color: var(--secondary-color);
            background-color: #f0f8ff;
            transform: scale(1.05);
        }
        
        .table-btn.selected {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }
        
        .table-btn.occupied {
            background-color: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }
        
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #666;
        }
        
        .empty-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #ddd;
        }
        
        @media (max-width: 992px) {
            .header {
                flex-direction: column;
                gap: 15px;
                padding: 15px;
            }
            
            .header-controls {
                width: 100%;
                justify-content: space-between;
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            }
        }
        
        @media (max-width: 768px) {
            .main-container {
                padding: 15px;
            }
            
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                grid-template-columns: 1fr;
            }
            
            .categories-tabs {
                overflow-x: auto;
                flex-wrap: nowrap;
                padding-bottom: 10px;
            }
            
            .modal-content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Cabeçalho com logo e controles -->
    <div class="header">
        <div class="logo-container">
            <div class="logo">SANREMO</div>
            <div class="logo-software">SOFTWARE</div>
        </div>
        
        <div class="header-controls">
            <!-- Seleção de idioma com bandeiras -->
            <div class="language-selector">
                <img src="https://flagcdn.com/w40/pt.png" class="lang-flag active" data-lang="pt" title="Português">
                <img src="https://flagcdn.com/w40/de.png" class="lang-flag" data-lang="de" title="Deutsch">
                <img src="https://flagcdn.com/w40/it.png" class="lang-flag" data-lang="it" title="Italiano">
                <img src="https://flagcdn.com/w40/nl.png" class="lang-flag" data-lang="nl" title="Nederlands">
            </div>
            
            <!-- Número da mesa -->
            <div class="table-number-container">
                <i class="fas fa-chair"></i>
                <div class="table-number" id="current-table">---</div>
            </div>
            
            <!-- Botão administração -->
            <button class="admin-btn" id="admin-btn">
                <i class="fas fa-lock"></i>
                <span id="admin-btn-text">Admin</span>
            </button>
        </div>
    </div>
    
    <!-- Conteúdo principal -->
    <div class="main-container">
        <!-- Modal para selecionar mesa -->
        <div class="modal" id="table-modal">
            <div class="modal-content">
                <h2 class="modal-title" id="table-modal-title">Selecionar Mesa</h2>
                <p id="table-modal-description">Por favor, selecione o número da sua mesa antes de fazer o pedido.</p>
                
                <div class="table-selector" id="table-selector">
                    <!-- As mesas serão geradas por JavaScript -->
                </div>
                
                <div class="modal-buttons">
                    <button class="action-btn secondary-btn" id="confirm-table-btn">
                        <i class="fas fa-check"></i>
                        <span id="confirm-table-text">Confirmar Mesa</span>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Modal de administração -->
        <div class="modal" id="admin-modal">
            <div class="modal-content">
                <h2 class="modal-title" id="admin-modal-title">Acesso Administração</h2>
                
                <div class="form-group">
                    <label class="form-label" for="admin-code">Código de Acesso</label>
                    <input type="password" id="admin-code" class="form-input" placeholder="Digite o código de acesso">
                </div>
                
                <div class="modal-buttons">
                    <button class="action-btn danger-btn" id="cancel-admin-btn">
                        <i class="fas fa-times"></i>
                        <span id="cancel-admin-text">Cancelar</span>
                    </button>
                    <button class="action-btn primary-btn" id="login-admin-btn">
                        <i class="fas fa-sign-in-alt"></i>
                        <span id="login-admin-text">Entrar</span>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Modal para adicionar/editar produtos -->
        <div class="modal" id="product-modal">
            <div class="modal-content">
                <h2 class="modal-title" id="product-modal-title">Adicionar Produto</h2>
                
                <div class="form-group">
                    <label class="form-label" for="product-name">Nome do Produto</label>
                    <input type="text" id="product-name" class="form-input" placeholder="Ex: Mojito">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="product-description">Descrição</label>
                    <input type="text" id="product-description" class="form-input" placeholder="Ex: Rum, hortelã, limão, açúcar">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="product-price">Preço (€)</label>
                    <input type="number" id="product-price" class="form-input" placeholder="Ex: 7.50" step="0.01" min="0">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="product-category">Categoria</label>
                    <select id="product-category" class="form-input">
                        <option value="cocktails">Cocktails</option>
                        <option value="bebidas">Bebidas</option>
                        <option value="cafes">Cafés</option>
                        <option value="comida">Comida</option>
                        <option value="sobremesas">Sobremesas</option>
                    </select>
                </div>
                
                <div class="modal-buttons">
                    <button class="action-btn danger-btn" id="cancel-product-btn">
                        <i class="fas fa-times"></i>
                        <span id="cancel-product-text">Cancelar</span>
                    </button>
                    <button class="action-btn primary-btn" id="save-product-btn">
                        <i class="fas fa-save"></i>
                        <span id="save-product-text">Guardar Produto</span>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Abas de categorias -->
        <div class="categories-tabs" id="categories-tabs">
            <!-- As abas serão geradas por JavaScript -->
        </div>
        
        <!-- Conteúdo das categorias -->
        <div id="categories-content">
            <!-- Os produtos serão carregados por categoria via JavaScript -->
        </div>
        
        <!-- Painel de administração (visível apenas após login) -->
        <div class="admin-panel" id="admin-panel">
            <h2 class="section-title">
                <i class="fas fa-user-cog"></i>
                <span id="admin-panel-title">Painel de Administração</span>
            </h2>
            
            <!-- Gestão de produtos -->
            <div class="admin-section">
                <h3 id="manage-products-title">Gerir Produtos</h3>
                <button class="action-btn primary-btn" id="add-product-btn">
                    <i class="fas fa-plus"></i>
                    <span id="add-product-text">Adicionar Novo Produto</span>
                </button>
                
                <div class="products-list" id="admin-products-list">
                    <!-- Lista de produtos para administração -->
                </div>
            </div>
            
            <!-- Estatísticas -->
            <div class="admin-section">
                <h3 id="statistics-title">Estatísticas</h3>
                <div class="summary-row">
                    <span id="total-orders-label">Total de Pedidos Hoje:</span>
                    <span id="total-orders-value">0</span>
                </div>
                <div class="summary-row">
                    <span id="revenue-label">Faturação Hoje:</span>
                    <span id="revenue-value">€0.00</span>
                </div>
            </div>
            
            <!-- Botão para sair do modo admin -->
            <button class="action-btn danger-btn" id="logout-admin-btn">
                <i class="fas fa-sign-out-alt"></i>
                <span id="logout-admin-text">Sair do Modo Admin</span>
            </button>
        </div>
        
        <!-- Pedido atual -->
        <div class="order-container" id="order-container">
            <div class="order-header">
                <h2 class="section-title" id="order-title">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Seu Pedido</span>
                </h2>
                <div class="table-display">
                    <i class="fas fa-chair"></i>
                    <span id="table-label">Mesa:</span>
                    <div class="table-number-display" id="order-table-number">---</div>
                </div>
            </div>
            
            <div class="order-items" id="order-items">
                <div class="empty-state" id="empty-order">
                    <div class="empty-icon">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <h3 id="empty-order-title">Seu pedido está vazio</h3>
                    <p id="empty-order-description">Selecione itens do menu para adicionar ao seu pedido.</p>
                </div>
            </div>
            
            <div class="order-summary">
                <div class="summary-row">
                    <span id="subtotal-label">Subtotal:</span>
                    <span id="subtotal-value">€0.00</span>
                </div>
                <div class="summary-row">
                    <span id="tax-label">IVA (10%):</span>
                    <span id="tax-value">€0.00</span>
                </div>
                <div class="summary-row total-row">
                    <span id="total-label">Total:</span>
                    <span id="total-value">€0.00</span>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="action-btn primary-btn" id="save-order-btn">
                    <i class="fas fa-save"></i>
                    <span id="save-order-text">Guardar Pedido</span>
                </button>
                <button class="action-btn secondary-btn" id="print-order-btn">
                    <i class="fas fa-print"></i>
                    <span id="print-order-text">Imprimir na Cozinha</span>
                </button>
                <button class="action-btn tertiary-btn" id="send-whatsapp-btn">
                    <i class="fab fa-whatsapp"></i>
                    <span id="send-whatsapp-text">Enviar por WhatsApp</span>
                </button>
                <button class="action-btn danger-btn" id="clear-order-btn">
                    <i class="fas fa-trash"></i>
                    <span id="clear-order-text">Limpar Pedido</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        // ===================== CONFIGURAÇÕES =====================
        const CONFIG = {
            ADMIN_CODE: "1234", // Código de acesso para administração
            DEFAULT_TABLE: null, // Mesa selecionada (null = não selecionada)
            TAX_RATE: 0.10, // Taxa de IVA (10%)
            MAX_TABLES: 20 // Número máximo de mesas
        };

        // ===================== TRADUÇÕES =====================
        const TRANSLATIONS = {
            pt: {
                // Títulos e cabeçalhos
                "app-title": "SANREMO - Sistema de Pedidos",
                "select-table": "Selecionar Mesa",
                "table-description": "Por favor, selecione o número da sua mesa antes de fazer o pedido.",
                "confirm-table": "Confirmar Mesa",
                "admin-access": "Acesso Administração",
                "admin-code": "Código de Acesso",
                "cancel": "Cancelar",
                "login": "Entrar",
                "add-product": "Adicionar Produto",
                "product-name": "Nome do Produto",
                "product-desc": "Descrição",
                "product-price": "Preço (€)",
                "product-category": "Categoria",
                "save-product": "Guardar Produto",
                "admin-panel": "Painel de Administração",
                "manage-products": "Gerir Produtos",
                "add-new-product": "Adicionar Novo Produto",
                "statistics": "Estatísticas",
                "total-orders": "Total de Pedidos Hoje:",
                "revenue": "Faturação Hoje:",
                "logout-admin": "Sair do Modo Admin",
                "order-title": "Seu Pedido",
                "table-label": "Mesa:",
                
                // Categorias
                "cocktails": "Cocktails",
                "bebidas": "Bebidas",
                "cafes": "Cafés",
                "comida": "Comida",
                "sobremesas": "Sobremesas",
                "all": "Todos",
                
                // Botões
                "admin-btn": "Admin",
                "save-order": "Guardar Pedido",
                "print-kitchen": "Imprimir na Cozinha",
                "send-whatsapp": "Enviar por WhatsApp",
                "clear-order": "Limpar Pedido",
                "add-to-order": "Adicionar",
                "remove": "Remover",
                "edit": "Editar",
                "delete": "Eliminar",
                
                // Labels
                "subtotal": "Subtotal:",
                "tax": "IVA (10%):",
                "total": "Total:",
                "empty-order-title": "Seu pedido está vazio",
                "empty-order-description": "Selecione itens do menu para adicionar ao seu pedido.",
                
                // Mensagens
                "table-required": "Por favor, selecione uma mesa primeiro!",
                "order-saved": "Pedido guardado com sucesso!",
                "order-printed": "Pedido enviado para impressão na cozinha!",
                "order-cleared": "Pedido limpo com sucesso!",
                "product-added": "Produto adicionado com sucesso!",
                "product-updated": "Produto atualizado com sucesso!",
                "product-deleted": "Produto eliminado com sucesso!",
                "invalid-code": "Código de acesso inválido!",
                "login-success": "Acesso administração concedido!"
            },
            de: {
                "app-title": "SANREMO - Bestellsystem",
                "select-table": "Tisch auswählen",
                "table-description": "Bitte wählen Sie Ihre Tischnummer, bevor Sie bestellen.",
                "confirm-table": "Tisch bestätigen",
                "admin-access": "Administratorzugang",
                "admin-code": "Zugangscode",
                "cancel": "Abbrechen",
                "login": "Einloggen",
                "add-product": "Produkt hinzufügen",
                "product-name": "Produktname",
                "product-desc": "Beschreibung",
                "product-price": "Preis (€)",
                "product-category": "Kategorie",
                "save-product": "Produkt speichern",
                "admin-panel": "Administratorpanel",
                "manage-products": "Produkte verwalten",
                "add-new-product": "Neues Produkt hinzufügen",
                "statistics": "Statistiken",
                "total-orders": "Bestellungen heute:",
                "revenue": "Umsatz heute:",
                "logout-admin": "Admin-Modus verlassen",
                "order-title": "Ihre Bestellung",
                "table-label": "Tisch:",
                
                "cocktails": "Cocktails",
                "bebidas": "Getränke",
                "cafes": "Kaffee",
                "comida": "Essen",
                "sobremesas": "Desserts",
                "all": "Alle",
                
                "admin-btn": "Admin",
                "save-order": "Bestellung speichern",
                "print-kitchen": "In Küche drucken",
                "send-whatsapp": "Per WhatsApp senden",
                "clear-order": "Bestellung löschen",
                "add-to-order": "Hinzufügen",
                "remove": "Entfernen",
                "edit": "Bearbeiten",
                "delete": "Löschen",
                
                "subtotal": "Zwischensumme:",
                "tax": "MwSt (10%):",
                "total": "Gesamt:",
                "empty-order-title": "Ihr Warenkorb ist leer",
                "empty-order-description": "Wählen Sie Artikel aus der Speisekarte, um sie hinzuzufügen.",
                
                "table-required": "Bitte wählen Sie zuerst einen Tisch aus!",
                "order-saved": "Bestellung erfolgreich gespeichert!",
                "order-printed": "Bestellung an die Küche gesendet!",
                "order-cleared": "Bestellung erfolgreich gelöscht!",
                "product-added": "Produkt erfolgreich hinzugefügt!",
                "product-updated": "Produkt erfolgreich aktualisiert!",
                "product-deleted": "Produkt erfolgreich gelöscht!",
                "invalid-code": "Ungültiger Zugangscode!",
                "login-success": "Administratorzugang gewährt!"
            },
            it: {
                "app-title": "SANREMO - Sistema Ordini",
                "select-table": "Seleziona Tavolo",
                "table-description": "Seleziona il numero del tuo tavolo prima di ordinare.",
                "confirm-table": "Conferma Tavolo",
                "admin-access": "Accesso Amministratore",
                "admin-code": "Codice di Accesso",
                "cancel": "Annulla",
                "login": "Accedi",
                "add-product": "Aggiungi Prodotto",
                "product-name": "Nome Prodotto",
                "product-desc": "Descrizione",
                "product-price": "Prezzo (€)",
                "product-category": "Categoria",
                "save-product": "Salva Prodotto",
                "admin-panel": "Pannello Amministratore",
                "manage-products": "Gestisci Prodotti",
                "add-new-product": "Aggiungi Nuovo Prodotto",
                "statistics": "Statistiche",
                "total-orders": "Ordini Oggi:",
                "revenue": "Fatturato Oggi:",
                "logout-admin": "Esci da Modalità Admin",
                "order-title": "Il Tuo Ordine",
                "table-label": "Tavolo:",
                
                "cocktails": "Cocktail",
                "bebidas": "Bevande",
                "cafes": "Caffè",
                "comida": "Cibo",
                "sobremesas": "Dessert",
                "all": "Tutti",
                
                "admin-btn": "Admin",
                "save-order": "Salva Ordine",
                "print-kitchen": "Stampa in Cucina",
                "send-whatsapp": "Invia tramite WhatsApp",
                "clear-order": "Cancella Ordine",
                "add-to-order": "Aggiungi",
                "remove": "Rimuovi",
                "edit": "Modifica",
                "delete": "Elimina",
                
                "subtotal": "Subtotale:",
                "tax": "IVA (10%):",
                "total": "Totale:",
                "empty-order-title": "Il tuo ordine è vuoto",
                "empty-order-description": "Seleziona articoli dal menu per aggiungerli al tuo ordine.",
                
                "table-required": "Seleziona prima un tavolo!",
                "order-saved": "Ordine salvato con successo!",
                "order-printed": "Ordine inviato alla cucina!",
                "order-cleared": "Ordine cancellato con successo!",
                "product-added": "Prodotto aggiunto con successo!",
                "product-updated": "Prodotto aggiornato con successo!",
                "product-deleted": "Prodotto eliminato con successo!",
                "invalid-code": "Codice di accesso non valido!",
                "login-success": "Accesso amministratore concesso!"
            },
            nl: {
                "app-title": "SANREMO - Bestelsysteem",
                "select-table": "Selecteer Tafel",
                "table-description": "Selecteer uw tafelnummer voordat u bestelt.",
                "confirm-table": "Bevestig Tafel",
                "admin-access": "Beheerderstoegang",
                "admin-code": "Toegangscode",
                "cancel": "Annuleren",
                "login": "Inloggen",
                "add-product": "Product Toevoegen",
                "product-name": "Productnaam",
                "product-desc": "Beschrijving",
                "product-price": "Prijs (€)",
                "product-category": "Categorie",
                "save-product": "Product Opslaan",
                "admin-panel": "Beheerderpaneel",
                "manage-products": "Producten Beheren",
                "add-new-product": "Nieuw Product Toevoegen",
                "statistics": "Statistieken",
                "total-orders": "Bestellingen Vandaag:",
                "revenue": "Omzet Vandaag:",
                "logout-admin": "Verlaat Beheerdersmodus",
                "order-title": "Uw Bestelling",
                "table-label": "Tafel:",
                
                "cocktails": "Cocktails",
                "bebidas": "Dranken",
                "cafes": "Koffie",
                "comida": "Eten",
                "sobremesas": "Desserts",
                "all": "Alle",
                
                "admin-btn": "Beheerder",
                "save-order": "Bestelling Opslaan",
                "print-kitchen": "Print in Keuken",
                "send-whatsapp": "Verstuur via WhatsApp",
                "clear-order": "Bestelling Wissen",
                "add-to-order": "Toevoegen",
                "remove": "Verwijderen",
                "edit": "Bewerken",
                "delete": "Verwijderen",
                
                "subtotal": "Subtotaal:",
                "tax": "BTW (10%):",
                "total": "Totaal:",
                "empty-order-title": "Uw bestelling is leeg",
                "empty-order-description": "Selecteer items uit het menu om toe te voegen aan uw bestelling.",
                
                "table-required": "Selecteer eerst een tafel!",
                "order-saved": "Bestelling succesvol opgeslagen!",
                "order-printed": "Bestelling naar de keuken gestuurd!",
                "order-cleared": "Bestelling succesvol gewist!",
                "product-added": "Product succesvol toegevoegd!",
                "product-updated": "Product succesvol bijgewerkt!",
                "product-deleted": "Product succesvol verwijderd!",
                "invalid-code": "Ongeldige toegangscode!",
                "login-success": "Beheerderstoegang verleend!"
            }
        };

        // ===================== ESTADO DA APLICAÇÃO =====================
        const STATE = {
            currentLang: 'pt',
            currentTable: null,
            currentOrder: [],
            products: [],
            categories: ['cocktails', 'bebidas', 'cafes', 'comida', 'sobremesas'],
            isAdmin: false,
            editingProductId: null
        };

        // ===================== INICIALIZAÇÃO =====================
        document.addEventListener('DOMContentLoaded', function() {
            initApp();
        });

        function initApp() {
            // Configurar bandeiras de idioma
            setupLanguageFlags();
            
            // Carregar produtos do localStorage ou dados padrão
            loadProducts();
            
            // Inicializar seleção de mesa
            setupTableSelector();
            
            // Inicializar abas de categorias
            setupCategoryTabs();
            
            // Carregar pedido salvo
            loadOrderFromStorage();
            
            // Configurar event listeners
            setupEventListeners();
            
            // Mostrar modal de mesa se não houver mesa selecionada
            setTimeout(() => {
                if (!STATE.currentTable) {
                    document.getElementById('table-modal').style.display = 'flex';
                }
            }, 500);
            
            // Aplicar traduções iniciais
            applyTranslations();
        }

        // ===================== CONFIGURAÇÃO DE IDIOMAS =====================
        function setupLanguageFlags() {
            const flags = document.querySelectorAll('.lang-flag');
            flags.forEach(flag => {
                flag.addEventListener('click', function() {
                    const lang = this.getAttribute('data-lang');
                    setLanguage(lang);
                    
                    // Atualizar bandeiras ativas
                    flags.forEach(f => f.classList.remove('active'));
                    this.classList.add('active');
                });
            });
        }

        function setLanguage(lang) {
            STATE.currentLang = lang;
            document.documentElement.lang = lang;
            document.title = TRANSLATIONS[lang]['app-title'];
            applyTranslations();
            renderProducts();
            updateOrderDisplay();
            updateAdminPanel();
        }

        function applyTranslations() {
            const lang = STATE.currentLang;
            const t = TRANSLATIONS[lang];
            
            // Traduzir elementos estáticos
            const elements = {
                'table-modal-title': 'select-table',
                'table-modal-description': 'table-description',
                'confirm-table-text': 'confirm-table',
                'admin-modal-title': 'admin-access',
                'cancel-admin-text': 'cancel',
                'login-admin-text': 'login',
                'product-modal-title': 'add-product',
                'cancel-product-text': 'cancel',
                'save-product-text': 'save-product',
                'admin-panel-title': 'admin-panel',
                'manage-products-title': 'manage-products',
                'add-product-text': 'add-new-product',
                'statistics-title': 'statistics',
                'total-orders-label': 'total-orders',
                'revenue-label': 'revenue',
                'logout-admin-text': 'logout-admin',
                'order-title': 'order-title',
                'table-label': 'table-label',
                'empty-order-title': 'empty-order-title',
                'empty-order-description': 'empty-order-description',
                'subtotal-label': 'subtotal',
                'tax-label': 'tax',
                'total-label': 'total',
                'admin-btn-text': 'admin-btn',
                'save-order-text': 'save-order',
                'print-order-text': 'print-kitchen',
                'send-whatsapp-text': 'send-whatsapp',
                'clear-order-text': 'clear-order'
            };
            
            for (const [elementId, translationKey] of Object.entries(elements)) {
                const element = document.getElementById(elementId);
                if (element) {
                    if (element.tagName === 'INPUT' && element.placeholder) {
                        // Para inputs com placeholder
                        const placeholderKeys = {
                            'admin-code': 'admin-code',
                            'product-name': 'product-name',
                            'product-description': 'product-desc',
                            'product-price': 'product-price'
                        };
                        if (placeholderKeys[element.id]) {
                            element.placeholder = t[placeholderKeys[element.id]];
                        }
                    } else {
                        // Para outros elementos
                        element.textContent = t[translationKey];
                    }
                }
            }
            
            // Atualizar labels de formulário
            document.querySelectorAll('.form-label').forEach(label => {
                if (label.htmlFor) {
                    const forKey = label.htmlFor;
                    const labelKeys = {
                        'admin-code': 'admin-code',
                        'product-name': 'product-name',
                        'product-description': 'product-desc',
                        'product-price': 'product-price',
                        'product-category': 'product-category'
                    };
                    if (labelKeys[forKey]) {
                        label.textContent = t[labelKeys[forKey]];
                    }
                }
            });
        }

        // ===================== SELEÇÃO DE MESA =====================
        function setupTableSelector() {
            const tableSelector = document.getElementById('table-selector');
            tableSelector.innerHTML = '';
            
            for (let i = 1; i <= CONFIG.MAX_TABLES; i++) {
                const tableBtn = document.createElement('button');
                tableBtn.className = 'table-btn';
                tableBtn.textContent = i;
                tableBtn.setAttribute('data-table', i);
                
                // Verificar se a mesa está ocupada (simulação)
                const isOccupied = Math.random() > 0.7; // 30% de chance de estar ocupada
                if (isOccupied) {
                    tableBtn.classList.add('occupied');
                }
                
                tableBtn.addEventListener('click', function() {
                    if (this.classList.contains('occupied')) {
                        alert(TRANSLATIONS[STATE.currentLang]['table-required']);
                        return;
                    }
                    
                    // Remover seleção anterior
                    document.querySelectorAll('.table-btn').forEach(btn => {
                        btn.classList.remove('selected');
                    });
                    
                    // Selecionar nova mesa
                    this.classList.add('selected');
                    STATE.currentTable = parseInt(this.getAttribute('data-table'));
                });
                
                tableSelector.appendChild(tableBtn);
            }
        }

        // ===================== PRODUTOS =====================
        function loadProducts() {
            // Tentar carregar do localStorage
            const savedProducts = localStorage.getItem('sanremo_products');
            
            if (savedProducts) {
                STATE.products = JSON.parse(savedProducts);
            } else {
                // Carregar produtos padrão
                STATE.products = [
                    { id: 1, name: 'Mojito', description: 'Rum, hortelã, limão, açúcar', price: 8.50, category: 'cocktails' },
                    { id: 2, name: 'Margarita', description: 'Tequila, Cointreau, limão', price: 9.00, category: 'cocktails' },
                    { id: 3, name: 'Caipirinha', description: 'Cachaça, limão, açúcar', price: 7.50, category: 'cocktails' },
                    { id: 4, name: 'Água Mineral', description: 'Garrafa 500ml', price: 1.50, category: 'bebidas' },
                    { id: 5, name: 'Coca-Cola', description: 'Lata 330ml', price: 2.00, category: 'bebidas' },
                    { id: 6, name: 'Vinho Tinto', description: 'Copo 150ml', price: 3.50, category: 'bebidas' },
                    { id: 7, name: 'Expresso', description: 'Café curto e intenso', price: 1.00, category: 'cafes' },
                    { id: 8, name: 'Cappuccino', description: 'Café com leite vaporizado', price: 2.50, category: 'cafes' },
                    { id: 9, name: 'Hambúrguer', description: 'Carne, queijo, alface, tomate', price: 12.50, category: 'comida' },
                    { id: 10, name: 'Pizza Margherita', description: 'Molho tomate, mussarela, manjericão', price: 10.00, category: 'comida' },
                    { id: 11, name: 'Tiramisu', description: 'Sobremesa italiana', price: 5.50, category: 'sobremesas' },
                    { id: 12, name: 'Cheesecake', description: 'Torta de queijo com frutas', price: 6.00, category: 'sobremesas' }
                ];
                
                saveProductsToStorage();
            }
            
            renderProducts();
        }

        function saveProductsToStorage() {
            localStorage.setItem('sanremo_products', JSON.stringify(STATE.products));
        }

        // ===================== RENDERIZAÇÃO =====================
        function setupCategoryTabs() {
            const categoriesTabs = document.getElementById('categories-tabs');
            const t = TRANSLATIONS[STATE.currentLang];
            
            categoriesTabs.innerHTML = '';
            
            // Adicionar tab "Todos"
            const allTab = document.createElement('button');
            allTab.className = 'category-tab active';
            allTab.setAttribute('data-category', 'all');
            allTab.innerHTML = `<i class="fas fa-th-large"></i> ${t['all']}`;
            allTab.addEventListener('click', function() {
                switchCategory('all');
            });
            categoriesTabs.appendChild(allTab);
            
            // Adicionar tabs para cada categoria
            STATE.categories.forEach(category => {
                const tab = document.createElement('button');
                tab.className = 'category-tab';
                tab.setAttribute('data-category', category);
                
                // Ícone baseado na categoria
                let icon = 'fa-utensils';
                if (category === 'cocktails') icon = 'fa-glass-martini-alt';
                if (category === 'bebidas') icon = 'fa-wine-bottle';
                if (category === 'cafes') icon = 'fa-coffee';
                if (category === 'sobremesas') icon = 'fa-ice-cream';
                
                tab.innerHTML = `<i class="fas ${icon}"></i> ${t[category]}`;
                tab.addEventListener('click', function() {
                    switchCategory(category);
                });
                categoriesTabs.appendChild(tab);
            });
            
            // Inicializar com a categoria "all"
            switchCategory('all');
        }

        function switchCategory(category) {
            // Atualizar tabs ativas
            document.querySelectorAll('.category-tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.getAttribute('data-category') === category) {
                    tab.classList.add('active');
                }
            });
            
            renderProducts(category);
        }

        function renderProducts(category = 'all') {
            const categoriesContent = document.getElementById('categories-content');
            const t = TRANSLATIONS[STATE.currentLang];
            
            // Filtrar produtos por categoria
            let filteredProducts = STATE.products;
            if (category !== 'all') {
                filteredProducts = STATE.products.filter(product => product.category === category);
            }
            
            // Agrupar por categoria
            const productsByCategory = {};
            filteredProducts.forEach(product => {
                if (!productsByCategory[product.category]) {
                    productsByCategory[product.category] = [];
                }
                productsByCategory[product.category].push(product);
            });
            
            // Renderizar
            categoriesContent.innerHTML = '';
            
            for (const [cat, products] of Object.entries(productsByCategory)) {
                const categorySection = document.createElement('div');
                categorySection.className = 'category-section';
                
                const categoryTitle = document.createElement('h2');
                categoryTitle.className = 'section-title';
                categoryTitle.innerHTML = `<i class="fas ${getCategoryIcon(cat)}"></i> ${t[cat]}`;
                
                const productsGrid = document.createElement('div');
                productsGrid.className = 'products-grid';
                
                products.forEach(product => {
                    const productCard = document.createElement('div');
                    productCard.className = 'product-card';
                    productCard.innerHTML = `
                        <div class="product-name">${product.name}</div>
                        <div class="product-description">${product.description}</div>
                        <div class="product-footer">
                            <div class="product-price">€${product.price.toFixed(2)}</div>
                            <button class="add-btn" data-id="${product.id}">
                                <i class="fas fa-plus"></i>
                                ${t['add-to-order']}
                            </button>
                        </div>
                    `;
                    productsGrid.appendChild(productCard);
                });
                
                categorySection.appendChild(categoryTitle);
                categorySection.appendChild(productsGrid);
                categoriesContent.appendChild(categorySection);
            }
            
            // Adicionar event listeners aos botões de adicionar
            document.querySelectorAll('.add-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    if (!STATE.currentTable) {
                        alert(t['table-required']);
                        document.getElementById('table-modal').style.display = 'flex';
                        return;
                    }
                    
                    const productId = parseInt(this.getAttribute('data-id'));
                    addToOrder(productId);
                });
            });
        }

        function getCategoryIcon(category) {
            switch(category) {
                case 'cocktails': return 'fa-glass-martini-alt';
                case 'bebidas': return 'fa-wine-bottle';
                case 'cafes': return 'fa-coffee';
                case 'comida': return 'fa-utensils';
                case 'sobremesas': return 'fa-ice-cream';
                default: return 'fa-utensils';
            }
        }

        // ===================== GESTÃO DE PEDIDOS =====================
        function addToOrder(productId) {
            const product = STATE.products.find(p => p.id === productId);
            if (!product) return;
            
            const existingItem = STATE.currentOrder.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity++;
            } else {
                STATE.currentOrder.push({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    quantity: 1
                });
            }
            
            updateOrderDisplay();
            saveOrderToStorage();
        }

        function updateOrderDisplay() {
            const orderItemsContainer = document.getElementById('order-items');
            const emptyOrder = document.getElementById('empty-order');
            const t = TRANSLATIONS[STATE.currentLang];
            
            // Atualizar número da mesa
            if (STATE.currentTable) {
                document.getElementById('current-table').textContent = STATE.currentTable;
                document.getElementById('order-table-number').textContent = STATE.currentTable;
            }
            
            // Mostrar/ocultar mensagem de pedido vazio
            if (STATE.currentOrder.length === 0) {
                emptyOrder.style.display = 'block';
                orderItemsContainer.innerHTML = '';
                orderItemsContainer.appendChild(emptyOrder);
            } else {
                emptyOrder.style.display = 'none';
                
                let orderHTML = '';
                STATE.currentOrder.forEach(item => {
                    orderHTML += `
                        <div class="order-item">
                            <div class="item-info">
                                <div class="product-name">${item.name}</div>
                                <div class="product-price">€${(item.price * item.quantity).toFixed(2)}</div>
                            </div>
                            <div class="item-controls">
                                <button class="quantity-btn minus-btn" data-id="${item.id}">-</button>
                                <div class="item-quantity">${item.quantity}</div>
                                <button class="quantity-btn plus-btn" data-id="${item.id}">+</button>
                                <button class="remove-btn" data-id="${item.id}">${t['remove']}</button>
                            </div>
                        </div>
                    `;
                });
                
                orderItemsContainer.innerHTML = orderHTML;
                
                // Adicionar event listeners
                document.querySelectorAll('.minus-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const itemId = parseInt(this.getAttribute('data-id'));
                        updateQuantity(itemId, -1);
                    });
                });
                
                document.querySelectorAll('.plus-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const itemId = parseInt(this.getAttribute('data-id'));
                        updateQuantity(itemId, 1);
                    });
                });
                
                document.querySelectorAll('.remove-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const itemId = parseInt(this.getAttribute('data-id'));
                        removeFromOrder(itemId);
                    });
                });
            }
            
            // Atualizar resumo
            updateOrderSummary();
        }

        function updateQuantity(itemId, change) {
            const itemIndex = STATE.currentOrder.findIndex(item => item.id === itemId);
            if (itemIndex === -1) return;
            
            STATE.currentOrder[itemIndex].quantity += change;
            
            if (STATE.currentOrder[itemIndex].quantity <= 0) {
                STATE.currentOrder.splice(itemIndex, 1);
            }
            
            updateOrderDisplay();
            saveOrderToStorage();
        }

        function removeFromOrder(itemId) {
            STATE.currentOrder = STATE.currentOrder.filter(item => item.id !== itemId);
            updateOrderDisplay();
            saveOrderToStorage();
        }

        function updateOrderSummary() {
            const subtotal = STATE.currentOrder.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const tax = subtotal * CONFIG.TAX_RATE;
            const total = subtotal + tax;
            
            document.getElementById('subtotal-value').textContent = `€${subtotal.toFixed(2)}`;
            document.getElementById('tax-value').textContent = `€${tax.toFixed(2)}`;
            document.getElementById('total-value').textContent = `€${total.toFixed(2)}`;
        }

        function saveOrderToStorage() {
            if (STATE.currentTable) {
                const orderData = {
                    table: STATE.currentTable,
                    order: STATE.currentOrder,
                    timestamp: new Date().toISOString()
                };
                localStorage.setItem(`sanremo_order_table_${STATE.currentTable}`, JSON.stringify(orderData));
            }
        }

        function loadOrderFromStorage() {
            if (STATE.currentTable) {
                const savedOrder = localStorage.getItem(`sanremo_order_table_${STATE.currentTable}`);
                if (savedOrder) {
                    const orderData = JSON.parse(savedOrder);
                    STATE.currentOrder = orderData.order || [];
                    updateOrderDisplay();
                }
            }
        }

        function clearOrder() {
            STATE.currentOrder = [];
            updateOrderDisplay();
            if (STATE.currentTable) {
                localStorage.removeItem(`sanremo_order_table_${STATE.currentTable}`);
            }
        }

        // ===================== ADMINISTRAÇÃO =====================
        function setupEventListeners() {
            const t = TRANSLATIONS[STATE.currentLang];
            
            // Confirmar mesa
            document.getElementById('confirm-table-btn').addEventListener('click', function() {
                if (!STATE.currentTable) {
                    alert(t['table-required']);
                    return;
                }
                document.getElementById('table-modal').style.display = 'none';
                updateOrderDisplay();
                loadOrderFromStorage();
            });
            
            // Botão admin
            document.getElementById('admin-btn').addEventListener('click', function() {
                document.getElementById('admin-modal').style.display = 'flex';
                document.getElementById('admin-code').focus();
            });
            
            // Cancelar admin
            document.getElementById('cancel-admin-btn').addEventListener('click', function() {
                document.getElementById('admin-modal').style.display = 'none';
                document.getElementById('admin-code').value = '';
            });
            
            // Login admin
            document.getElementById('login-admin-btn').addEventListener('click', function() {
                const code = document.getElementById('admin-code').value;
                if (code === CONFIG.ADMIN_CODE) {
                    STATE.isAdmin = true;
                    document.getElementById('admin-modal').style.display = 'none';
                    document.getElementById('admin-panel').style.display = 'block';
                    document.getElementById('admin-code').value = '';
                    updateAdminPanel();
                    alert(t['login-success']);
                } else {
                    alert(t['invalid-code']);
                }
            });
            
            // Logout admin
            document.getElementById('logout-admin-btn').addEventListener('click', function() {
                STATE.isAdmin = false;
                document.getElementById('admin-panel').style.display = 'none';
            });
            
            // Adicionar produto
            document.getElementById('add-product-btn').addEventListener('click', function() {
                STATE.editingProductId = null;
                document.getElementById('product-modal-title').textContent = t['add-product'];
                document.getElementById('product-name').value = '';
                document.getElementById('product-description').value = '';
                document.getElementById('product-price').value = '';
                document.getElementById('product-category').value = 'cocktails';
                document.getElementById('product-modal').style.display = 'flex';
            });
            
            // Cancelar produto
            document.getElementById('cancel-product-btn').addEventListener('click', function() {
                document.getElementById('product-modal').style.display = 'none';
                STATE.editingProductId = null;
            });
            
            // Guardar produto
            document.getElementById('save-product-btn').addEventListener('click', function() {
                const name = document.getElementById('product-name').value.trim();
                const description = document.getElementById('product-description').value.trim();
                const price = parseFloat(document.getElementById('product-price').value);
                const category = document.getElementById('product-category').value;
                
                if (!name || !description || isNaN(price) || price <= 0) {
                    alert('Por favor, preencha todos os campos corretamente.');
                    return;
                }
                
                if (STATE.editingProductId) {
                    // Editar produto existente
                    const productIndex = STATE.products.findIndex(p => p.id === STATE.editingProductId);
                    if (productIndex !== -1) {
                        STATE.products[productIndex] = {
                            ...STATE.products[productIndex],
                            name,
                            description,
                            price,
                            category
                        };
                        alert(t['product-updated']);
                    }
                } else {
                    // Adicionar novo produto
                    const newId = STATE.products.length > 0 ? Math.max(...STATE.products.map(p => p.id)) + 1 : 1;
                    STATE.products.push({
                        id: newId,
                        name,
                        description,
                        price,
                        category
                    });
                    alert(t['product-added']);
                }
                
                saveProductsToStorage();
                document.getElementById('product-modal').style.display = 'none';
                STATE.editingProductId = null;
                updateAdminPanel();
                renderProducts();
            });
            
            // Botões do pedido
            document.getElementById('save-order-btn').addEventListener('click', function() {
                if (!STATE.currentTable) {
                    alert(t['table-required']);
                    document.getElementById('table-modal').style.display = 'flex';
                    return;
                }
                saveOrderToStorage();
                alert(t['order-saved']);
            });
            
            document.getElementById('print-order-btn').addEventListener('click', function() {
                if (!STATE.currentTable) {
                    alert(t['table-required']);
                    document.getElementById('table-modal').style.display = 'flex';
                    return;
                }
                if (STATE.currentOrder.length === 0) {
                    alert('Adicione itens ao pedido antes de imprimir.');
                    return;
                }
                alert(t['order-printed']);
            });
            
            document.getElementById('send-whatsapp-btn').addEventListener('click', function() {
                if (!STATE.currentTable) {
                    alert(t['table-required']);
                    document.getElementById('table-modal').style.display = 'flex';
                    return;
                }
                if (STATE.currentOrder.length === 0) {
                    alert('Adicione itens ao pedido antes de enviar.');
                    return;
                }
                
                // Gerar mensagem para WhatsApp
                let message = `Pedido - Mesa ${STATE.currentTable}%0A%0A`;
                STATE.currentOrder.forEach(item => {
                    message += `${item.quantity}x ${item.name} - €${(item.price * item.quantity).toFixed(2)}%0A`;
                });
                
                const subtotal = STATE.currentOrder.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                const tax = subtotal * CONFIG.TAX_RATE;
                const total = subtotal + tax;
                
                message += `%0ASubtotal: €${subtotal.toFixed(2)}%0A`;
                message += `IVA (10%): €${tax.toFixed(2)}%0A`;
                message += `Total: €${total.toFixed(2)}%0A%0A`;
                message += `SANREMO - ${new Date().toLocaleString()}`;
                
                // Abrir WhatsApp
                window.open(`https://wa.me/?text=${message}`, '_blank');
            });
            
            document.getElementById('clear-order-btn').addEventListener('click', function() {
                if (STATE.currentOrder.length === 0) return;
                if (confirm('Tem certeza que deseja limpar o pedido?')) {
                    clearOrder();
                    alert(t['order-cleared']);
                }
            });
            
            // Fechar modais ao clicar fora
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.style.display = 'none';
                        if (this.id === 'product-modal') {
                            STATE.editingProductId = null;
                        }
                    }
                });
            });
            
            // Tecla Enter no código admin
            document.getElementById('admin-code').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    document.getElementById('login-admin-btn').click();
                }
            });
        }

        function updateAdminPanel() {
            if (!STATE.isAdmin) return;
            
            const t = TRANSLATIONS[STATE.currentLang];
            const adminProductsList = document.getElementById('admin-products-list');
            
            // Listar produtos
            adminProductsList.innerHTML = '';
            
            if (STATE.products.length === 0) {
                adminProductsList.innerHTML = '<div class="empty-state">Nenhum produto cadastrado</div>';
            } else {
                STATE.products.forEach(product => {
                    const productItem = document.createElement('div');
                    productItem.className = 'product-admin-item';
                    productItem.innerHTML = `
                        <div>
                            <div class="product-name">${product.name}</div>
                            <div class="product-description">${product.description} - €${product.price.toFixed(2)}</div>
                        </div>
                        <div class="admin-actions">
                            <button class="edit-btn" data-id="${product.id}">${t['edit']}</button>
                            <button class="delete-btn" data-id="${product.id}">${t['delete']}</button>
                        </div>
                    `;
                    adminProductsList.appendChild(productItem);
                });
                
                // Adicionar event listeners para editar/eliminar
                document.querySelectorAll('.edit-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const productId = parseInt(this.getAttribute('data-id'));
                        editProduct(productId);
                    });
                });
                
                document.querySelectorAll('.delete-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const productId = parseInt(this.getAttribute('data-id'));
                        deleteProduct(productId);
                    });
                });
            }
            
            // Atualizar estatísticas
            updateStatistics();
        }

        function editProduct(productId) {
            const product = STATE.products.find(p => p.id === productId);
            if (!product) return;
            
            STATE.editingProductId = productId;
            const t = TRANSLATIONS[STATE.currentLang];
            
            document.getElementById('product-modal-title').textContent = t['add-product'];
            document.getElementById('product-name').value = product.name;
            document.getElementById('product-description').value = product.description;
            document.getElementById('product-price').value = product.price;
            document.getElementById('product-category').value = product.category;
            document.getElementById('product-modal').style.display = 'flex';
        }

        function deleteProduct(productId) {
            const t = TRANSLATIONS[STATE.currentLang];
            if (confirm('Tem certeza que deseja eliminar este produto?')) {
                STATE.products = STATE.products.filter(p => p.id !== productId);
                saveProductsToStorage();
                updateAdminPanel();
                renderProducts();
                alert(t['product-deleted']);
            }
        }

        function updateStatistics() {
            // Simular estatísticas
            const totalOrders = Math.floor(Math.random() * 50) + 10;
            const revenue = (totalOrders * 15.75).toFixed(2);
            
            document.getElementById('total-orders-value').textContent = totalOrders;
            document.getElementById('revenue-value').textContent = `€${revenue}`;
        }
    </script>
</body>
</html>
